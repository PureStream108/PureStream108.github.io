<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MyGo!!!!! | PureStream &amp; Marblue</title><meta name="author" content="Pure Stream"><meta name="copyright" content="Pure Stream"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="It&#39;s MyGo!!!!!">
<meta property="og:type" content="website">
<meta property="og:title" content="MyGo!!!!!">
<meta property="og:url" content="https://purestream108.github.io/project/2025/04/19/MyGo-1/index.html">
<meta property="og:site_name" content="PureStream &amp; Marblue">
<meta property="og:description" content="It&#39;s MyGo!!!!!">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://purestream108.github.io/project/img/purestream.jpg">
<meta property="article:published_time" content="2025-04-19T13:02:27.000Z">
<meta property="article:modified_time" content="2025-04-19T15:51:48.846Z">
<meta property="article:author" content="Pure Stream">
<meta property="article:tag" content="Golang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://purestream108.github.io/project/img/purestream.jpg"><link rel="shortcut icon" href="/img/marblue.jpg"><link rel="canonical" href="https://purestream108.github.io/project/2025/04/19/MyGo-1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.3.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Pure Stream","link":"链接: ","source":"来源: PureStream & Marblue","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MyGo!!!!!',
  isHighlightShrink: false,
  isToc: false,
  pageType: '[MyGo-1]'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/lazy.gif" data-original="/img/purestream.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fas fa-heart"></i><span> Animation</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url(/img/Go15.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">PureStream &amp; Marblue</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fas fa-heart"></i><span> Animation</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="page-site-info"><h1 id="site-title">MyGo!!!!!</h1></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MyGO-速通Golang基础"><a href="#MyGO-速通Golang基础" class="headerlink" title="MyGO!!!!! (速通Golang基础)"></a>MyGO!!!!! (速通Golang基础)</h1><p>寒假打了Hgame，发现web基本给的都是go文件，就想着速通一下，至少能看懂（）,本篇非零基础（即之前学过其他语言），部分不解释原理，有缺漏或者建议欢迎补充和提出</p>
<p>参考<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gf4y1r79E?share_source=copy_web&vd_source=f562f6189eb9bea1c36d290ce909a246&spm_id_from=333.788.videopod.episodes">8小时转职Golang工程师(如果你想低成本学习Go语言)_哔哩哔哩_bilibili</a></p>
<p>原理图源来自上述视频(侵删)</p>
<h2 id="1-Hello-World"><a href="#1-Hello-World" class="headerlink" title="1. Hello World"></a>1. Hello World</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">// (导入fmt头文件)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;  <span class="comment">//注意这个大括号不能分段，只能同一行，这是go的规定</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>1.什么是 <code>package</code>？</strong></p>
<ul>
<li>在Go语言中，<code>package</code> 是代码组织的基本单位，类似于其他语言中的“模块”或“模块化代码”。</li>
<li>文件是以包的形式分组的。每个源文件都属于一个包，并且每个包可以包含多个文件。</li>
<li>包声明的作用是声明当前文件所属的包。</li>
</ul>
<p><strong>2.<code>package main</code> 的作用</strong></p>
<ul>
<li><strong>程序的入口点</strong>：当声明了一个 <code>package main</code> 时，这个Go程序会被编译成一个可执行文件。换句话说，只有在 <code>package main</code> 中定义的代码才会成为独立运行的程序。</li>
<li><strong>包含 <code>main</code> 函数</strong>：<code>package main</code> 是唯一一个可以定义 <code>main</code> 函数的包。<code>main</code> 函数是程序的起点，程序从这里开始执行。</li>
<li><strong>全局唯一性</strong>：在一个Go项目中，只能有一个 <code>package main</code> ，它决定了程序的入口。</li>
</ul>
<h2 id="2-常见的变量声明"><a href="#2-常见的变量声明" class="headerlink" title="2. 常见的变量声明"></a>2. 常见的变量声明</h2><h3 id="1-单变量"><a href="#1-单变量" class="headerlink" title="1.单变量"></a>1.单变量</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">var</span> a <span class="type">int</span> = <span class="number">0</span> <span class="comment">//go语言中类型是在变量名后面的,赋值则默认值是0,但建议先赋值，不然vscode里可能给你弹                 //提示，以及定义和赋值建议在同一行</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="keyword">var</span> num = <span class="string">&quot;type&quot;</span> <span class="comment">//类型推导：自动判断类型</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>num := <span class="number">555</span> <span class="comment">//合并写法，注意是 := (常用方法) 但只能用在函数体内，不能全局</span></span><br></pre></td></tr></table></figure>



<h3 id="2-多变量声明"><a href="#2-多变量声明" class="headerlink" title="2.多变量声明"></a>2.多变量声明</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">var</span> n1,name,n3 = <span class="number">100</span>,<span class="string">&quot;name&quot;</span>,<span class="number">888</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>n1,name,n3 := <span class="number">100</span>,<span class="string">&quot;tom&quot;</span>,<span class="number">888</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="keyword">var</span> xx,yy <span class="type">int</span> = <span class="number">100</span>,<span class="number">200</span> <span class="comment">//同类型</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span><span class="keyword">var</span> (</span><br><span class="line">	vv <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">    jj <span class="type">bool</span> = <span class="literal">true</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h2 id="3-const与const-中的iota"><a href="#3-const与const-中的iota" class="headerlink" title="3. const与const() 中的iota"></a>3. const与const() 中的iota</h2><h3 id="1-const"><a href="#1-const" class="headerlink" title="1.const"></a>1.const</h3><p>定义一个变量不能被修改（常量）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">const</span>(</span><br><span class="line">	a = <span class="number">10</span></span><br><span class="line">    b = <span class="number">20</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="2-iota"><a href="#2-iota" class="headerlink" title="2.iota"></a>2.iota</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//const 用来定义枚举类型</span></span><br><span class="line"><span class="comment">//可以在const()中添加关键字iota，默认为0，每行都会加一</span></span><br><span class="line"> <span class="keyword">const</span>(</span><br><span class="line">     beijing = <span class="literal">iota</span>  <span class="comment">//0</span></span><br><span class="line">     shanghai     <span class="comment">//1</span></span><br><span class="line">     gaungzhou    <span class="comment">//2</span></span><br><span class="line">     shenzhen     <span class="comment">//3</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>iota只能配合const()使用，不能在其他地方使用，但我个人觉得没啥用</p>
<h2 id="4-函数多返回值"><a href="#4-函数多返回值" class="headerlink" title="4. 函数多返回值"></a>4. 函数多返回值</h2><h3 id="1-单返回"><a href="#1-单返回" class="headerlink" title="1.单返回"></a>1.单返回</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">re</span><span class="params">(a <span class="type">string</span> , b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;  <span class="comment">// 最后int是返回类型</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;a =&quot;</span>,a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;b =&quot;</span>,b)</span><br><span class="line"></span><br><span class="line">    c := <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c := re(<span class="string">&quot;aaa&quot;</span>,<span class="number">555</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;c =&quot;</span>,c)</span><br><span class="line"></span><br><span class="line"><span class="comment">// a = aaa b = 555 c = 100</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-多返回"><a href="#2-多返回" class="headerlink" title="2.多返回"></a>2.多返回</h3><p><strong>匿名返回</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">res2</span><span class="params">(a <span class="type">string</span> , b <span class="type">int</span>)</span></span> (<span class="type">int</span> ,<span class="type">int</span>)&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;a =&quot;</span>,a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;b =&quot;</span>,b)</span><br><span class="line">    c := <span class="number">100</span></span><br><span class="line">    d := <span class="number">777</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> c,d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret1,ret2 := res2(<span class="string">&quot;GenshinImpact&quot;</span>,<span class="number">2021</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;ret1 =&quot;</span>,ret1,<span class="string">&quot;re2 =&quot;</span>,ret2)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ret1 = 100 ret2 = 777 a = GenshinImapact b = 2021</span></span><br></pre></td></tr></table></figure>

<p><strong>有形参名字</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo3</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (r1, r2 <span class="type">int</span>)&#123; <span class="comment">// (r1 int, r2 int)</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;r1 =&quot;</span>,r1)</span><br><span class="line">    fmt.Println(<span class="string">&quot;r2 =&quot;</span>,r2)</span><br><span class="line">    <span class="comment">//r1,r2属于foo3的形参，初始化默认为0</span></span><br><span class="line">    <span class="comment">//作用域为foo3这个函数体的&#123;&#125;空间</span></span><br><span class="line">    </span><br><span class="line">    r1 = <span class="number">1000</span></span><br><span class="line">    r2 = <span class="number">2000</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="5-指针"><a href="#5-指针" class="headerlink" title="5. 指针"></a>5. 指针</h2><p>与其他语言同理</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a *<span class="type">int</span>,b *<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">    temp = *a</span><br><span class="line">    *a = *b</span><br><span class="line">    *b = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(p *<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">    *p = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Second One&quot;</span>)</span><br><span class="line">    a := <span class="number">1</span></span><br><span class="line">    change(&amp;a) <span class="comment">//(带取址符号&amp;传入)</span></span><br><span class="line">    b := <span class="number">555</span></span><br><span class="line">    c := <span class="number">777</span></span><br><span class="line">    swap(&amp;b,&amp;c)  <span class="comment">//同上</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;a =&quot;</span>,a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;b =&quot;</span>,b,<span class="string">&quot;c =&quot;</span>,c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Second One</span></span><br><span class="line"><span class="comment">//a = 10</span></span><br><span class="line"><span class="comment">//b = 777 c = 555</span></span><br></pre></td></tr></table></figure>



<h2 id="6-Defer"><a href="#6-Defer" class="headerlink" title="6. Defer"></a>6. Defer</h2><h3 id="1-defer的顺序"><a href="#1-defer的顺序" class="headerlink" title="1.defer的顺序"></a>1.defer的顺序</h3><p><strong><code>defer</code> 的基本作用</strong></p>
<ul>
<li><strong>延迟执行</strong>：<code>defer</code> 会将函数调用保存到一个栈中，直到当前函数执行完毕，并准备返回之前才会依次执行这些被延迟的函数调用。</li>
<li><strong>执行顺序</strong>：多个 <code>defer</code> 语句会按照 <strong>后进先出（LIFO）</strong> 的顺序执行。</li>
<li><strong>清理操作</strong>：常用于资源释放、文件关闭、锁解锁等场景，以确保某些操作在函数结束时被执行。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;main end1&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;main end2&quot;</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;It is the first&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Second one&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//It is the first</span></span><br><span class="line"><span class="comment">//Second one</span></span><br><span class="line"><span class="comment">//main end2</span></span><br><span class="line"><span class="comment">//main end1</span></span><br></pre></td></tr></table></figure>

<p>这里可以看出defer是在最后执行的，而且先执行的defer排在第二个之后</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go1.png"></p>
<p>总结来说defer是个<strong>先进后出</strong>的调用方式</p>
<h3 id="2-defer-和-return-顺序"><a href="#2-defer-和-return-顺序" class="headerlink" title="2.defer 和 return 顺序"></a>2.defer 和 return 顺序</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">defFunc</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer !!!&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnFunc</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;return !!!&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnA</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> defFunc()</span><br><span class="line">	<span class="keyword">return</span> returnFunc()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	returnA()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//return !!!</span></span><br><span class="line"><span class="comment">//defer !!!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里说明defer 和 return 在同一个函数中的话，<strong>defer是比return后执行的</strong>，因为defer是在当前函数的生命周期结束之后才被执行（到函数最后一个大括号）</p>
<h2 id="7-For循环"><a href="#7-For循环" class="headerlink" title="7. For循环"></a>7. For循环</h2><p>在Go语言中，<code>for</code>循环是唯一支持的循环结构，以下是<code>for</code>循环的常见用法：</p>
<h3 id="1-基本形式"><a href="#1-基本形式" class="headerlink" title="1.基本形式"></a><strong>1.基本形式</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 初始化; 条件; 后操作 &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>

<h3 id="2-无限循环"><a href="#2-无限循环" class="headerlink" title="2.无限循环"></a><strong>2.无限循环</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">    <span class="comment">// 无限循环</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Loop forever!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-类似-while-的用法"><a href="#3-类似-while-的用法" class="headerlink" title="3.类似 while 的用法"></a><strong>3.类似 <code>while</code> 的用法</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 条件 &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> x &lt; <span class="number">5</span> &#123;</span><br><span class="line">        fmt.Println(x)</span><br><span class="line">        x++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-类似-do-while-的用法"><a href="#4-类似-do-while-的用法" class="headerlink" title="4.类似 do-while 的用法"></a><strong>4.类似 <code>do-while</code> 的用法</strong></h3><p>Go语言没有 <code>do-while</code> 语句，但可以通过控制逻辑来实现：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(x)</span><br><span class="line">        x++</span><br><span class="line">        <span class="keyword">if</span> x &gt;= <span class="number">5</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-控制循环"><a href="#5-控制循环" class="headerlink" title="5.控制循环"></a><strong>5.控制循环</strong></h3><ul>
<li>**<code>break</code>**：跳出当前循环。</li>
<li>**<code>continue</code>**：跳过当前循环的剩余部分，继续下一次循环。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>   <span class="comment">// 跳出循环</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span> <span class="comment">// 跳过偶数</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-使用-range-遍历"><a href="#6-使用-range-遍历" class="headerlink" title="6.使用 range 遍历"></a><strong>6.使用 <code>range</code> 遍历</strong></h3><p><code>range</code> 是 Go 中用于循环遍历切片、数组、字符串和字典的关键字</p>
<ul>
<li><strong><code>index</code></strong>: 表示元素的索引位置（从 0 开始）。<ul>
<li>示例中，<code>index</code> 的值分别为 0、1、2、3、4。</li>
</ul>
</li>
<li>**<code>value</code>**：表示当前索引对应的值。<ul>
<li>示例中，<code>value</code> 的值分别为 10、20、30、40、50。</li>
</ul>
</li>
</ul>
<p><strong>遍历数组&#x2F;切片</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    arr := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Index: %d, Value: %d\n&quot;</span>, index, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Index: 0, Value: 1</span><br><span class="line">Index: 1, Value: 2</span><br><span class="line">Index: 2, Value: 3</span><br><span class="line">Index: 3, Value: 4</span><br><span class="line">Index: 4, Value: 5</span><br></pre></td></tr></table></figure>

<p><strong>遍历字符串</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    str := <span class="string">&quot;Hello&quot;</span></span><br><span class="line">    <span class="keyword">for</span> index, char := <span class="keyword">range</span> str &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Index: %d, Character: %c\n&quot;</span>, index, char)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>遍历字典</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>, <span class="string">&quot;c&quot;</span>: <span class="number">3</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> m &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Key: %s, Value: %d\n&quot;</span>, key, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-总结"><a href="#7-总结" class="headerlink" title="7.总结"></a><strong>7.总结</strong></h3><ul>
<li>**<code>for</code>**：通用循环结构。</li>
<li>**<code>range</code>**：用于高效遍历集合。</li>
<li>**<code>break</code> &#x2F; <code>continue</code>**：控制循环流程。</li>
</ul>
<h2 id="8-数组和动态数组"><a href="#8-数组和动态数组" class="headerlink" title="8. 数组和动态数组"></a>8. 数组和动态数组</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr [<span class="number">5</span>]<span class="type">int</span> <span class="comment">// 定义一个包含5个整数的数组，初始值为零值（0）</span></span><br><span class="line"><span class="keyword">var</span> arr [<span class="number">3</span>]<span class="type">string</span> <span class="comment">// 定义一个包含3个字符串的数组，初始值为空字符串（&quot;&quot;）</span></span><br></pre></td></tr></table></figure>

<p><strong>初始化：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125; <span class="comment">// 初始化一个包含3个整数的数组</span></span><br><span class="line">arr := [...]<span class="type">string</span>&#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125; <span class="comment">// 使用 `...` 表示根据元素自动推断数组长度</span></span><br></pre></td></tr></table></figure>

<p>而也可以只定义前几个数字：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	arr := [<span class="number">10</span>]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index,value := <span class="keyword">range</span> arr&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index =&quot;</span>,index,<span class="string">&quot;value =&quot;</span>,value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">index = <span class="number">0</span> value = <span class="number">1</span></span><br><span class="line">index = <span class="number">1</span> value = <span class="number">2</span></span><br><span class="line">index = <span class="number">2</span> value = <span class="number">3</span></span><br><span class="line">index = <span class="number">3</span> value = <span class="number">4</span></span><br><span class="line">index = <span class="number">4</span> value = <span class="number">0</span></span><br><span class="line">index = <span class="number">5</span> value = <span class="number">0</span></span><br><span class="line">index = <span class="number">6</span> value = <span class="number">0</span></span><br><span class="line">index = <span class="number">7</span> value = <span class="number">0</span></span><br><span class="line">index = <span class="number">8</span> value = <span class="number">0</span></span><br><span class="line">index = <span class="number">9</span> value = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>数组的长度是其类型的一部分。例如，<code>[3]int</code> 和 <code>[5]int</code> 是不同的类型。</li>
<li>数组的长度是固定的，无法动态调整大小。</li>
</ul>
<h3 id="2-动态数组（slice）"><a href="#2-动态数组（slice）" class="headerlink" title="2.动态数组（slice）"></a>2.动态数组（slice）</h3><p>切片是动态数组，它是一个引用类型，底层基于数组实现，可以动态调整大小。</p>
<p><strong>定义语法：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> slice []<span class="type">int</span> <span class="comment">// 定义一个空的切片，初始值为 `nil`</span></span><br><span class="line">slice := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>) <span class="comment">// 创建一个长度为5的切片，初始元素为零值</span></span><br><span class="line">slice := []<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125; <span class="comment">// 直接初始化切片</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> slice == <span class="literal">nil</span>&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;slice为空&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;  <span class="comment">// 不能分段</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;slice有空间&quot;</span>)</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//可以用这个来验证slice初始值</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printarr</span><span class="params">(arr []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">//引用传递</span></span><br><span class="line">	<span class="comment">// _ 表示匿名变量</span></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> arr&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value =&quot;</span>,value)</span><br><span class="line">	&#125;</span><br><span class="line">	arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	arr := []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;arr type is %T\n&quot;</span>,arr)  <span class="comment">//Printf支持格式化字符串，可以精确控制输出的格式。</span></span><br><span class="line">                                        <span class="comment">//例如，%d 表示整数，%s 表示字符串，%f 表示浮点数等。</span></span><br><span class="line">	printarr(arr)</span><br><span class="line">	fmt.Println(<span class="string">&quot;==========&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> arr&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value =&quot;</span>,value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">arr type is []int</span></span><br><span class="line"><span class="comment">value = 1</span></span><br><span class="line"><span class="comment">value = 2</span></span><br><span class="line"><span class="comment">value = 3</span></span><br><span class="line"><span class="comment">value = 4</span></span><br><span class="line"><span class="comment">==========</span></span><br><span class="line"><span class="comment">value = 100</span></span><br><span class="line"><span class="comment">value = 2</span></span><br><span class="line"><span class="comment">value = 3</span></span><br><span class="line"><span class="comment">value = 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>也可以动态调整数组大小：</p>
<ul>
<li><p><strong>追加元素</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr = <span class="built_in">append</span>(slice, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>) <span class="comment">// 向切片追加元素</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>在此之前先介绍容量（cap）：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> numbers = <span class="built_in">make</span>([]<span class="type">int</span> ,<span class="number">3</span>, <span class="number">5</span>) <span class="comment">//长度三容量五初始为0的数组</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;len = &quot;</span>,<span class="built_in">len</span>(numbers),<span class="string">&quot;cap = &quot;</span>,<span class="built_in">cap</span>(numbers),<span class="string">&quot;slice = &quot;</span>,numbers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go2.png"></p>
<p>这样追加之后<code>numbers = append(numbers , 1)</code></p>
<p>长度就会变成4，但是容量还是5</p>
<p><code>numbers = [0,0,0,1]</code></p>
<p>如果超出容量的话，就会再开辟一个cap容量（5），就是你设置的容量</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go3.png"></p>
<ul>
<li><p><strong>切片操作</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sub := arr[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">// 创建一个从索引1到3（不包括4）的子切片</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>如果存在：<code>s1 := s[0:2]</code></p>
<p>那么如果执行<code>s1[0] = 100</code>后</p>
<p>s1和s都会被改变（因为底层数组相同）</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go4.png"></p>
<p><strong>简单示例:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 定义一个切片</span></span><br><span class="line">    slice := []<span class="type">int</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 追加元素</span></span><br><span class="line">    slice = <span class="built_in">append</span>(slice, <span class="number">40</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印切片</span></span><br><span class="line">    fmt.Println(slice) <span class="comment">// 输出：[10 20 30 40 50]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 切片操作</span></span><br><span class="line">    sub := slice[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line">    fmt.Println(sub) <span class="comment">// 输出：[20 30 40]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>动态数组里还有两个重要的概念：</p>
<h4 id="1-map-的含义"><a href="#1-map-的含义" class="headerlink" title="1. map 的含义"></a><strong>1. <code>map</code> 的含义</strong></h4><ul>
<li><strong><code>map</code></strong> 是 Go 语言中的一种动态数组，也称为“字典”或“哈希表”。</li>
<li>它允许你存储键值对（Key-Value），并通过键快速查找对应的值。</li>
<li><code>map</code> 的大小是动态调整的，可以根据需要增长或缩小。</li>
</ul>
<p><strong>语法定义</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[KeyType]ValueType</span><br></pre></td></tr></table></figure>

<p><strong>创建 <code>map</code> 的方式</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 `make` 创建</span></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接初始化</span></span><br><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;apple&quot;</span>: <span class="number">5</span>, <span class="string">&quot;banana&quot;</span>: <span class="number">10</span>&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go5.png"></p>
<p>（单纯输出的话是乱序，但如果是遍历输出的话就是按顺序）</p>
<p>**操作 <code>map</code>**：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入或更新键值对</span></span><br><span class="line">m[<span class="string">&quot;cherry&quot;</span>] = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取值</span></span><br><span class="line">value, exists := m[<span class="string">&quot;apple&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除键值对</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">&quot;banana&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历 `map`</span></span><br><span class="line"><span class="keyword">for</span> key, value := <span class="keyword">range</span> m &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Key: %s, Value: %d\n&quot;</span>, key, value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>如果一开始map不作初始化的时候相当于一个空指针，需要make创建空间，直接赋值就不需要</p>
<h4 id="2-make-的含义"><a href="#2-make-的含义" class="headerlink" title="2. make 的含义"></a><strong>2. <code>make</code> 的含义</strong></h4><ul>
<li><strong><code>make</code></strong> 是一个内置函数，用于创建集合类型（如切片 <code>[]</code>、<code>map</code> 和通道 <code>chan</code>）。</li>
<li>它为这些动态数据结构分配内存并返回一个引用。</li>
</ul>
<p><strong>语法</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> variable_name = <span class="built_in">make</span>(Type, arguments...)</span><br></pre></td></tr></table></figure>

<p><strong>常见用法</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个切片</span></span><br><span class="line">slice := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>) <span class="comment">// 长度为5，容量为5的切片</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 `map`</span></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>) <span class="comment">// 提前分配空间，但长度为0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个通道</span></span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">100</span>) <span class="comment">// 有缓冲的通道，容量为100</span></span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong></p>
<ul>
<li><strong><code>map</code></strong> 是一种动态数组，用于存储键值对，通过键快速查找值。</li>
<li><strong><code>make</code></strong> 是用于创建 <code>map</code>、切片和通道的函数，为它们分配内存。</li>
</ul>
<h2 id="9-Struct基本定义和使用"><a href="#9-Struct基本定义和使用" class="headerlink" title="9. Struct基本定义和使用"></a>9. Struct基本定义和使用</h2><h3 id="1-type关键字"><a href="#1-type关键字" class="headerlink" title="1.type关键字"></a>1.type关键字</h3><p>定义一个类型别名：(类似C语言中的typedef，但这里的type是创建新的类型，并非只提供别名)</p>
<ol>
<li><strong>定义自定义类型</strong>：可以基于内置类型或结构体来定义新的类型，使其具有特定的特性。</li>
<li><strong>定义结构体</strong>：用 <code>type</code> 来定义复杂的自定义数据结构。</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个类型别名</span></span><br><span class="line"><span class="keyword">type</span> ID <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> id ID = <span class="number">100</span></span><br><span class="line">    fmt.Println(id) <span class="comment">// 输出: 100</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, id) <span class="comment">// 输出: main.ID</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, <span class="type">int</span>(id)) <span class="comment">// 转换为 int 类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-结构体定义"><a href="#2-结构体定义" class="headerlink" title="2.结构体定义"></a>2.结构体定义</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个结构体</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">    age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 创建结构体实例</span></span><br><span class="line">    p := Person&#123;</span><br><span class="line">        name: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">        age:  <span class="number">30</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(p) <span class="comment">// 输出: &#123;Alice 30&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以尝试另一种定义方式:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person Person</span><br><span class="line">persion.name = <span class="string">&quot;Furina&quot;</span></span><br><span class="line">persion.age = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">fmt.Println(persion)</span><br></pre></td></tr></table></figure>

<p>如果定义一个函数要改变它的值：（传地址）</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go6.png"></p>
<h2 id="10-面向对象类的表示和封装"><a href="#10-面向对象类的表示和封装" class="headerlink" title="10. 面向对象类的表示和封装"></a>10. 面向对象类的表示和封装</h2><p>Go 语言不像 Python 或 Java 那样有传统的类（Class）概念，Go 确实在语法层面没有直接支持类，但可以通过 <strong>结构体（struct）</strong> 和 <strong>方法（method）</strong> 的组合来实现类似面向对象编程（OOP）的行为，比如封装、继承和多态。</p>
<h3 id="1-定义结构体"><a href="#1-定义结构体" class="headerlink" title="1.定义结构体"></a>1.定义结构体</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Game <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	year <span class="type">int</span></span><br><span class="line">	enterprise enterprise <span class="comment">//嵌套结构体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> enterprise <span class="keyword">struct</span>&#123;</span><br><span class="line">	city <span class="type">string</span></span><br><span class="line">	name_f <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再创建实例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">g := Game&#123;</span><br><span class="line">		name : <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">		year : <span class="number">2024</span>,</span><br><span class="line">		enterprise: enterprise&#123;</span><br><span class="line">			city: <span class="string">&quot;ShangHai&quot;</span>,</span><br><span class="line">			name_f: <span class="string">&quot;miHoYo&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-方法"><a href="#2-方法" class="headerlink" title="2.方法"></a>2.方法</h3><p>在 Go 中，方法是绑定到某个类型（通常为结构体）上的函数。方法通过在函数声明前加上 <code>receiver</code>（接收者）来指定所属的类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(g *Game)</span></span> SayHello()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Tech otakus save the world&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Welcome to &quot;</span>,g.name,<span class="string">&quot;,publishing in &quot;</span>,g.year)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(g Game)</span></span> GetName_Publish() <span class="type">string</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> g.enterprise.name_f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这之中，方法接收者为*Game和Game</p>
<p>而至于为什么一个有*而一个没有呢</p>
<p>就是*的<strong>指针接收者</strong>可以修改原始Game的实例，下面的<strong>值接收者</strong>就不会改变实例，具体怎么用看实际需求</p>
<p>调用：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g.SayHello()</span><br><span class="line">name := g.GetName_Publish()</span><br><span class="line">fmt.Println(name)</span><br></pre></td></tr></table></figure>

<p>完整如下：</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go7.png"></p>
<h3 id="3-封装"><a href="#3-封装" class="headerlink" title="3.封装"></a>3.封装</h3><p>Go 中通过控制字段和方法的可见性来实现封装。字段和方法的名称首字母大小写决定了它们的可见性：</p>
<ul>
<li><strong>小写字母开头</strong>：只能在当前包（package）内部访问。</li>
<li><strong>大写字母开头</strong>：可以在其他包（package）中访问。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    name  <span class="type">string</span> <span class="comment">// 私有字段</span></span><br><span class="line">    age   <span class="type">int</span>    <span class="comment">// 私有字段</span></span><br><span class="line">    city  <span class="type">string</span> <span class="comment">// 私有字段</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供一个公有的方法来访问私有字段</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> GetAge() <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> p.age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供一个公有的方法来设置私有字段</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> SetAge(age <span class="type">int</span>) &#123;</span><br><span class="line">    p.age = age</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="11-继承"><a href="#11-继承" class="headerlink" title="11. 继承"></a>11. 继承</h2><p><strong>定义一个新的结构体里面嵌套父级结构体：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Ten <span class="keyword">struct</span>&#123;</span><br><span class="line">	Game  <span class="comment">//继承了父类Game</span></span><br><span class="line">	level <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>创建一个新的实例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s := Ten&#123;Game&#123;<span class="string">&quot;starrail&quot;</span>,<span class="number">2023</span>,enterprise&#123;<span class="string">&quot;shanghai&quot;</span>,<span class="string">&quot;mihoyo&quot;</span>&#125;&#125;,<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>

<p>如果觉得这样太麻烦了，可以<code>var s Ten</code></p>
<p>然后再逐一赋值<code>s.name = &quot;???&quot;</code></p>
<p><strong>创建方法：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Ten)</span></span> Fly()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Heads up ! The tracks are running !&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Ten)</span></span> Sing()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;The wheels are singing !&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>调用方法：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">s.SayHello()</span><br><span class="line">s.Fly()</span><br><span class="line">s.Sing()</span><br><span class="line">fmt.Println(s)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">Welcome to starrail , publishing in 2023</span></span><br><span class="line"><span class="comment">Heads up ! The tracks are running !</span></span><br><span class="line"><span class="comment">The wheels are singing !</span></span><br><span class="line"><span class="comment">&#123;&#123;starrail 2023 &#123;shanghai mihoyo&#125;&#125; 5&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>





<h2 id="12-对象多态实现"><a href="#12-对象多态实现" class="headerlink" title="12. 对象多态实现"></a>12. 对象多态实现</h2><h3 id="1-Go语言中的多态"><a href="#1-Go语言中的多态" class="headerlink" title="1.Go语言中的多态"></a>1.Go语言中的多态</h3><p><strong>多态的定义</strong></p>
<p>多态是面向对象编程（OOP）的三大特性之一，另外两个是封装和继承。在编程中，多态指的是同一个接口或方法可以有不同的实现方式。在Go语言中，多态主要通过 <strong>接口</strong> 和 <strong>类型断言</strong> 来实现。</p>
<p><strong>通过接口实现多态</strong></p>
<p>Go语言中的接口是一种 <strong>隐式实现</strong> 的方式，不需要显式的继承或实现声明。只要类型实现了某个接口的所有方法，即可视为实现了该接口。这种机制使得不同的类型可以遵循相同的接口规范，从而实现多态行为。</p>
<h3 id="2-接口"><a href="#2-接口" class="headerlink" title="2.接口"></a>2.接口</h3><p>接口是包含方法签名的集合。它定义了对象应该具有的行为，而不需要关心对象的具体实现细节。在 Go 中，接口是一种抽象类型，不能直接实例化。</p>
<p><strong>简单定义</strong>：</p>
<p>接口通过 <code>type</code> 关键字和 <code>interface</code> 类型定义</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Animal <span class="keyword">interface</span>&#123; <span class="comment">//本质是一个指针</span></span><br><span class="line">	Sleep()</span><br><span class="line">	GetColor() <span class="type">string</span> <span class="comment">//获取动物颜色</span></span><br><span class="line">	GetType() <span class="type">string</span> <span class="comment">//获取动物种类</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>简单实现：</strong></p>
<p>在 Go 中，类型（如结构体）通过实现接口定义的所有方法来“隐式”满足接口。不需要显式声明“实现某个接口”，只要类型实现了接口的所有方法，它就被认为实现了该接口。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">	typedef <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Dog)</span></span> Sleep()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Dog is sleeping&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Dog)</span></span> GetColor() <span class="type">string</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> p.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Dog)</span></span> GetType() <span class="type">string</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> p.typedef</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，Dog实现了Animal的接口，这样的话Dog可以被赋值为Animal类型的变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> animal Animal <span class="comment">//接口数据类型</span></span><br><span class="line">	animal = &amp;Dog&#123;<span class="string">&quot;black&quot;</span>,<span class="string">&quot;labuladuo&quot;</span>&#125;</span><br><span class="line">	animal.Sleep()</span><br><span class="line">	name := animal.GetColor()</span><br><span class="line">	fmt.Println(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Dog is sleeping</span></span><br><span class="line"><span class="comment">black</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>多态性</strong>：通过接口，可以在不同的实现中使用同一组方法，实现多态行为。</li>
<li><strong>解耦</strong>：接口将实现与接口分开，使代码更加灵活和可维护。</li>
<li><strong>抽象</strong>：接口提供了一种抽象的方式，隐藏了实现细节。</li>
</ul>
<p>怎么体现他的多态性？我们可以再定义一个Cat类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span>&#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">	typedef <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Cat)</span></span> Sleep()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Cat is sleeping&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Cat)</span></span> GetColor() <span class="type">string</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> p.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Cat)</span></span> GetType() <span class="type">string</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> p.typedef</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们让animal等于具体的Cat：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">animal = &amp;Cat&#123;<span class="string">&quot;Green&quot;</span>,<span class="string">&quot;QQ&quot;</span>&#125; <span class="comment">//这里需要传址是因为interface本质上是一个指针</span></span><br><span class="line"></span><br><span class="line">animal.Sleep() <span class="comment">//调用猫的sleep</span></span><br></pre></td></tr></table></figure>

<p>发现给他具体什么对象，就可以调用这个对象的方法，这样就触发了一种多态现象</p>
<p><strong>另外还有一种触发方法：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">(animal Animal)</span></span>&#123;</span><br><span class="line">	animal.Sleep()</span><br><span class="line">	fmt.Println(<span class="string">&quot;color =&quot;</span>,animal.GetColor())</span><br><span class="line">	fmt.Println(<span class="string">&quot;type =&quot;</span>,animal.GetType())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cat := Cat&#123;<span class="string">&quot;Green&quot;</span>,<span class="string">&quot;QQ&quot;</span>&#125;</span><br><span class="line">    dog := Dog&#123;<span class="string">&quot;Yellow&quot;</span>,<span class="string">&quot;labuladuo&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line">    show(&amp;cat)</span><br><span class="line">    show(&amp;dog)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面所展示的也是一样的效果</p>
<p><strong>总结就是</strong>：</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go8.png"></p>
<h2 id="13-Interface空接口"><a href="#13-Interface空接口" class="headerlink" title="13. Interface空接口"></a>13. Interface空接口</h2><h3 id="1-空接口（interface-）"><a href="#1-空接口（interface-）" class="headerlink" title="1.空接口（interface{}）"></a>1.<strong>空接口（<code>interface&#123;&#125;</code>）</strong></h3><p>Go 中有一个特殊的空接口 <code>interface&#123;&#125;</code>，它可以存储任何类型的值。任何类型都隐式满足空接口的要求，因为它没有任何方法。(通用万能类型)</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go9.png"></p>
<h3 id="2-类型断言"><a href="#2-类型断言" class="headerlink" title="2.类型断言"></a>2.类型断言</h3><p>那么既然什么类型都能传进来，我们可以使用<strong>类型断言</strong>来判断接口变量实际类型，并获取值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Launching....&quot;</span>)</span><br><span class="line">	fmt.Println(arg)</span><br><span class="line"></span><br><span class="line">	value, ok := arg.(<span class="type">string</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> !ok&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;arg is not  string type &quot;</span>)</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value =&quot;</span>,value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以进行多个判断：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value,ok := arg.(<span class="type">int</span>) ok&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;int&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> value,ok := arg.(<span class="type">string</span>) ok&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;string&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;unknown type&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>基本语法</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := interfaceVar.(Type)</span><br></pre></td></tr></table></figure>

<p><strong>参数解释：</strong></p>
<ul>
<li><code>interfaceVar</code>：一个接口类型的变量。</li>
<li><code>Type</code>：期望的类型。</li>
<li><code>value</code>：如果断言成功，返回 <code>Type</code> 类型的值。</li>
<li><code>ok</code>：布尔值，表示断言是否成功。</li>
</ul>
<h2 id="14-变量内置pair结构"><a href="#14-变量内置pair结构" class="headerlink" title="14. 变量内置pair结构"></a>14. 变量内置pair结构</h2><p>变量分为type和value，type和value就是一个pair</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">string</span> = <span class="string">&quot;ace&quot;</span></span><br><span class="line">	<span class="comment">// pair&lt;type:string,value:ace&gt;</span></span><br><span class="line">	<span class="keyword">var</span> AllType <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	AllType = a</span><br><span class="line">	str,_ := AllType.(<span class="type">string</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>就是无论给a如果赋值，interface就只找到string类型去给str赋值</p>
<p>这段代码告诉我们，不管值怎么变，类型和值都是一个pair，绑定的</p>
<p>另外，如果给定：</p>
<p><code>b := &amp;Book&#123;&#125;</code></p>
<p><code>var r Reader = b</code></p>
<p>那么b和r的pair是相同的，这表示变量之间相互传递pair不变</p>
<p>另一种：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Type <span class="keyword">interface</span> &#123;</span><br><span class="line">	ReadBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span>&#123;</span><br><span class="line">	WriteBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Book)</span></span> ReadBook()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;reading....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Book)</span></span> WriteBook()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;writing....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	b := &amp;Book&#123;&#125;  <span class="comment">// pair&lt;type:Book,value:book&#123;&#125;地址&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> r Type = b <span class="comment">// pair&lt;type:Book,value:book&#123;&#125;地址&gt;</span></span><br><span class="line"></span><br><span class="line">	r.ReadBook()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> w Writer = r.(Writer)  <span class="comment">//这次断言成功是因为w,r的具体type是一致（强制类型转换）</span></span><br><span class="line"></span><br><span class="line">	w.WriteBook()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以发现pair都是不变的，实质上也算一种继承，因为Book同时实现了Type和Writer两个接口</p>
<h2 id="15-Reflect-反射机制"><a href="#15-Reflect-反射机制" class="headerlink" title="15. Reflect 反射机制"></a>15. Reflect 反射机制</h2><p>在 Go 中，每个变量都有两个部分：<strong>类型</strong>（Type）和 <strong>值</strong>（Value）。反射允许你在运行时获取和操作这两个部分。</p>
<ul>
<li><strong>类型</strong>：表示变量的数据类型，例如 <code>int</code>、<code>string</code>、<code>struct</code> 等。</li>
<li><strong>值</strong>：表示变量的实际数据内容，例如字符串 <code>Hello</code> 或整数 <code>42</code>。</li>
</ul>
<p>Go 的反射机制主要依赖于以下两个核心方法：</p>
<ol>
<li><code>reflect.TypeOf(v interface&#123;&#125;)</code>：返回变量 <code>v</code> 的类型。</li>
<li><code>reflect.ValueOf(v interface&#123;&#125;)</code>：返回变量 <code>v</code> 的值。</li>
</ol>
<p>包含头文件：**”reflect”**</p>
<h3 id="1-用法"><a href="#1-用法" class="headerlink" title="1.用法"></a>1.用法</h3><h4 id="获取变量的类型和值："><a href="#获取变量的类型和值：" class="headerlink" title="获取变量的类型和值："></a><strong>获取变量的类型和值：</strong></h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    name := <span class="string">&quot;Alice&quot;</span></span><br><span class="line">    age := <span class="number">30</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取类型和值</span></span><br><span class="line">    nameType := reflect.TypeOf(name)</span><br><span class="line">    nameValue := reflect.ValueOf(name)</span><br><span class="line"></span><br><span class="line">    ageType := reflect.TypeOf(age)</span><br><span class="line">    ageValue := reflect.ValueOf(age)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;Name Type:&quot;</span>, nameType)   <span class="comment">// 输出: string</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Name Value:&quot;</span>, nameValue) <span class="comment">// 输出: Alice</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Age Type:&quot;</span>, ageType)     <span class="comment">// 输出: int</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Age Value:&quot;</span>, ageValue)   <span class="comment">// 输出: 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>加上遍历：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;</span><br><span class="line">	Id <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p User)</span></span> Call()&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;calling....&quot;</span>)</span><br><span class="line">	fmt.Println(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	user := User&#123;<span class="number">1</span>,<span class="string">&quot;mi&quot;</span>,<span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">	DoFileAndMethod(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoFileAndMethod</span><span class="params">(input <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;  <span class="comment">// input形参</span></span><br><span class="line">	<span class="comment">// 获取类型</span></span><br><span class="line">	inputType := reflect.TypeOf(input)</span><br><span class="line">	fmt.Println(inputType.Name())</span><br><span class="line">	<span class="comment">//获取值</span></span><br><span class="line">	inputValue := reflect.ValueOf(input)</span><br><span class="line">	fmt.Println(inputValue)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumField();i++&#123;  <span class="comment">//获取字段数量NumField()</span></span><br><span class="line">		field := inputType.Field(i)  <span class="comment">//获取第i个字段信息</span></span><br><span class="line">		value := inputValue.Field(i).Interface() <span class="comment">//获取第i个字段的值</span></span><br><span class="line"></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v = %v\n&quot;</span>,field.Name, field.Type, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>;i &lt; inputType.NumMethod();i++&#123;  <span class="comment">//注意，在这边要将Call改成接受值类型而非传址</span></span><br><span class="line">		m := inputType.Method(i)			   <span class="comment">//或者也可以DoFileAndMethod(&amp;user)</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v\n&quot;</span>,m.Name,m.Type)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">User</span></span><br><span class="line"><span class="comment">&#123;1 mi 18&#125;</span></span><br><span class="line"><span class="comment">Id: int = 1</span></span><br><span class="line"><span class="comment">Name: string = mi</span></span><br><span class="line"><span class="comment">Age: int = 18</span></span><br><span class="line"><span class="comment">Call: func(main.User)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<p><strong>其中：</strong>(这些后缀都可以在对应头文件源码中找到，也可以通过<a target="_blank" rel="noopener" href="https://studygolang.com/pkgdoc">https://studygolang.com/pkgdoc</a>)</p>
<hr>
<p><strong><code>inputType.NumField()</code></strong></p>
<ul>
<li><code>NumField()</code> 是 <code>reflect.Type</code> 的一个方法，返回该结构体的字段数量。</li>
</ul>
<hr>
<p><strong><code>inputType.Field(i)</code></strong></p>
<ul>
<li>获取结构体中索引为 <code>i</code> 的字段。</li>
<li>返回值是一个 <code>reflect.StructField</code> 类型，包含了字段的名称、类型、标签（<code>struct tag</code>）等信息。</li>
</ul>
<hr>
<p><strong><code>inputValue.Field(i).Interface()</code></strong></p>
<ul>
<li><code>Field(i)</code> 获取结构体中索引为 <code>i</code> 的字段的值。</li>
<li><code>Interface()</code> 方法将反射值（<code>reflect.Value</code>）转换回接口类型（<code>interface&#123;&#125;</code>），以便可以获取该值的实际类型和值。</li>
</ul>
<hr>
<p><strong><code>inputType.NumMethod()</code></strong></p>
<ul>
<li><code>NumMethod()</code> 是 <code>reflect.Type</code> 的一个方法，返回该类型的方法数量。</li>
</ul>
<hr>
<p><strong><code>inputType.Method(i)</code></strong></p>
<ul>
<li>获取结构体中索引为 <code>i</code> 的方法。</li>
<li>返回值是一个 <code>reflect.Method</code> 类型，包含了方法的名称、类型等信息。</li>
</ul>
<h4 id="2-动态设置变量的值："><a href="#2-动态设置变量的值：" class="headerlink" title="2.动态设置变量的值："></a>2.<strong>动态设置变量的值：</strong></h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    v := reflect.ValueOf(&amp;a).Elem() <span class="comment">// 获取变量 a 的反射值</span></span><br><span class="line">    v.SetInt(<span class="number">10</span>)                   <span class="comment">// 修改变量 a 的值为 10</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;a is now:&quot;</span>, a) <span class="comment">// 输出: a is now: 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-其他"><a href="#3-其他" class="headerlink" title="3.其他"></a><strong>3.其他</strong></h4><h5 id="1-动态函数调用"><a href="#1-动态函数调用" class="headerlink" title="1.动态函数调用"></a>1.动态函数调用</h5><p>反射可用于调用未知类型的函数。例如，动态调用结构体的方法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> Greet() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello,&quot;</span>, p.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    p := Person&#123;Name: <span class="string">&quot;Alice&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    v := reflect.ValueOf(p)   <span class="comment">// 获取 Person 的反射值</span></span><br><span class="line">    method := v.MethodByName(<span class="string">&quot;Greet&quot;</span>) <span class="comment">// 获取 Greet 方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用方法</span></span><br><span class="line">    method.Call(<span class="literal">nil</span>) <span class="comment">// 输出: Hello, Alice</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-通用的打印函数"><a href="#2-通用的打印函数" class="headerlink" title="2.通用的打印函数"></a>2.通用的打印函数</h5><p>反射可用于实现一个通用的打印函数，支持任何类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Print</span><span class="params">(value <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    v := reflect.ValueOf(value) <span class="comment">// 获取值的反射</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Type: %s\n&quot;</span>, v.Type())</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Value: %v\n&quot;</span>, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Print(<span class="number">42</span>)           <span class="comment">// 输出 Type: int Value:42</span></span><br><span class="line">    Print(<span class="string">&quot;Hello&quot;</span>)      <span class="comment">// 输出 Type: string Value:Hello</span></span><br><span class="line">    Print([]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;) <span class="comment">// 输出 Type: []int Value:[1 2 3]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-自定义比较函数"><a href="#3-自定义比较函数" class="headerlink" title="3.自定义比较函数"></a>3.自定义比较函数</h5><p>反射可用于比较两个未知类型的变量：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AreEqual</span><span class="params">(a, b <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> reflect.DeepEqual(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := <span class="number">5</span></span><br><span class="line">    y := <span class="number">5</span></span><br><span class="line">    fmt.Println(AreEqual(x, y)) <span class="comment">// 输出: true</span></span><br><span class="line"></span><br><span class="line">    s1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">    s2 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">    fmt.Println(AreEqual(s1, s2)) <span class="comment">// 输出: true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-动态序列化"><a href="#4-动态序列化" class="headerlink" title="4.动态序列化"></a>4.<strong>动态序列化</strong></h5><p>反射可用于动态序列化和反序列化数据，例如自定义的 JSON 序列化：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="type">string</span></span><br><span class="line">    Email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">JSONMarshal</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span> ([]<span class="type">byte</span>, <span class="type">error</span>) &#123;</span><br><span class="line">    value := reflect.ValueOf(v)</span><br><span class="line">    t := value.Type()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> t.Kind() != reflect.Map &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;expected a map, got %s&quot;</span>, t.Kind())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> json.Marshal(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    user := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>:  <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Email&quot;</span>: <span class="string">&quot;alice@example.com&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data, err := JSONMarshal(user)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Error:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="type">string</span>(data)) <span class="comment">// 输出: &#123;&quot;Name&quot;:&quot;Alice&quot;,&quot;Email&quot;:&quot;alice@example.com&quot;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="16-结构体中Tag标签"><a href="#16-结构体中Tag标签" class="headerlink" title="16. 结构体中Tag标签"></a>16. 结构体中Tag标签</h2><h3 id="1-基本用法"><a href="#1-基本用法" class="headerlink" title="1.基本用法"></a>1.基本用法</h3><p>其实相当于注释，但是是可以被获取的，用&#96;&#96;表示</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Time <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`info:&quot;name&quot; doc:&quot;我的名字&quot;`</span></span><br><span class="line">	Sex <span class="type">string</span>	<span class="string">`info:&quot;sex&quot; doc:&quot;性别&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FindTag</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	t := reflect.TypeOf(arg).Elem()  <span class="comment">// .Elem() 获取指针所指向的值的类型，即 Time 类型</span></span><br><span class="line">    								 <span class="comment">// 如果不使用这个，则需要传值而不是传地址</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t.NumField(); i++&#123;</span><br><span class="line">		Tag_Info := t.Field(i).Tag.Get(<span class="string">&quot;info&quot;</span>)   <span class="comment">//t.Field(i).Tag 获取字段的标签</span></span><br><span class="line">		Tag_Doc := t.Field(i).Tag.Get(<span class="string">&quot;doc&quot;</span>)  </span><br><span class="line">        </span><br><span class="line">       <span class="comment">//.Get(&quot;info&quot;) 和 .Get(&quot;doc&quot;) 分别获取 info 和 doc 标签的值</span></span><br><span class="line">		</span><br><span class="line">        fmt.Println(<span class="string">&quot;info :&quot;</span>,Tag_Info,<span class="string">&quot;doc :&quot;</span>,Tag_Doc)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> re Time</span><br><span class="line"></span><br><span class="line">	FindTag(&amp;re)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">info : name doc : 我的名字</span></span><br><span class="line"><span class="comment">info : sex doc : 性别</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="2-在Json中的作用"><a href="#2-在Json中的作用" class="headerlink" title="2.在Json中的作用"></a>2.在Json中的作用</h3><p>包含头文件<code>&quot;encoding/json&quot;</code>，看下面这个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Game <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="type">string</span>  <span class="string">`json:&quot;title&quot;`</span></span><br><span class="line">	Year <span class="type">int</span>	 <span class="string">`json:&quot;year&quot;`</span></span><br><span class="line">	Auth <span class="type">string</span>  <span class="string">`json:&quot;author&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	game := Game&#123;<span class="string">&quot;StarRailway&quot;</span>,<span class="number">2023</span>,<span class="string">&quot;miHoYo&quot;</span>&#125;</span><br><span class="line">	json_str , err := json.Marshal(game)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;error .....&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;jsonstr =%s\n&quot;</span>,json_str)</span><br><span class="line"></span><br><span class="line">	my_Game := Game&#123;&#125;</span><br><span class="line">	err = json.Unmarshal(json_str, &amp;my_Game)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;error !&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;mygame =&quot;</span>,my_Game)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">jsonstr =&#123;&quot;title&quot;:&quot;StarRailway&quot;,&quot;year&quot;:2023,&quot;author&quot;:&quot;miHoYo&quot;&#125; //就变成json格式了</span></span><br><span class="line"><span class="comment">mygame = &#123;StarRailway 2023 miHoYo&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="其中："><a href="#其中：" class="headerlink" title="其中："></a>其中：</h4><ul>
<li><p><code>json.Marshal</code> 将 <code>game</code> 转换为 JSON 字符串：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;StarRailway&quot;</span><span class="punctuation">,</span><span class="attr">&quot;year&quot;</span><span class="punctuation">:</span><span class="number">2023</span><span class="punctuation">,</span><span class="attr">&quot;author&quot;</span><span class="punctuation">:</span><span class="string">&quot;miHoYo&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>反序列化</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_Game := Game&#123;&#125;</span><br><span class="line">err = json.Unmarshal(json_str, &amp;my_Game)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>json.Unmarshal</code> 将 JSON 字符串 <code>json_str</code> 解析为 <code>my_Game</code>：<ul>
<li><code>my_Game</code> 的字段值与 <code>game</code> 一致</li>
</ul>
</li>
</ul>
<p><strong>JSON 标签的必要性</strong>：</p>
<ul>
<li>如果没有 <code>json</code> 标签，JSON 字符串中的字段名将与结构体字段名一致（因 Go 字段名是大写的）</li>
</ul>
<p><strong>错误处理</strong>：</p>
<ul>
<li>如果 <code>json.Marshal</code> 或 <code>json.Unmarshal</code> 出现错误（例如字段类型不匹配），程序会退出</li>
</ul>
<p><strong>大写字段</strong>：</p>
<ul>
<li>结构体字段必须是大写（导出字段），否则无法序列化</li>
</ul>
<p><strong>指针传递</strong>：</p>
<ul>
<li><code>json.Unmarshal</code> 需要传入指针才能修改值（<code>&amp;my_Game</code>）</li>
</ul>
<h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h4><p>如果在上述代码中你打印<code>json_str</code>用的是Println，会出现一长串数字，是因为：</p>
<p><code>json_str</code> 是通过 <code>json.Marshal</code> 生成的，它的类型是 <code>[]byte</code>，<code>fmt.Println</code> 打印 <code>[]byte</code> 类型时会输出字节的数值，而不是可读的字符串</p>
<p>所以要正确打印就需要</p>
<p><code>fmt.Println(string(json_str)) // 打印完整的 JSON 字符串</code></p>
<p><code>fmt.Printf(&quot;%s&quot;,json_str)</code></p>
<h3 id="3-其他-1"><a href="#3-其他-1" class="headerlink" title="3.其他"></a>3.其他</h3><h4 id="排除字段"><a href="#排除字段" class="headerlink" title="排除字段"></a><strong>排除字段</strong></h4><p>如果希望某个字段不参与序列化或处理，可以将标签值设置为 <code>-</code>。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age   <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">    Email <span class="type">string</span> <span class="string">`json:&quot;-&quot;`</span> <span class="comment">// 排除该字段</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="标签的格式"><a href="#标签的格式" class="headerlink" title="标签的格式"></a><strong>标签的格式</strong></h4><p>标签的值可以包含多个键值对，用逗号分隔。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="type">string</span> <span class="string">`json:&quot;name,omitempty&quot;`</span></span><br><span class="line">    Email <span class="type">string</span> <span class="string">`json:&quot;email&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>omitempty</code> 表示如果字段为空（零值），则在序列化时省略该字段。</li>
</ul>
<h2 id="17-Goroutine"><a href="#17-Goroutine" class="headerlink" title="17. Goroutine"></a>17. Goroutine</h2><ul>
<li><strong>定义</strong> ：goroutine 是一种轻量级的线程，由 Go 运行时环境管理和调度，而不是直接由操作系统内核线程管理。它可以在一个独立的函数或方法上调运行，与主线程或其他 goroutine 并发执行</li>
<li><strong>启动</strong> ：通过在函数调用前加上关键字 <code>go</code>，就可以启动一个新的 goroutine</li>
<li>**调度与执行 **：<ul>
<li><strong>调度机制</strong> ：Go 运行时通过一个称为 Goroutine Scheduler 的调度器来管理 goroutine 的执行。调度器会根据系统资源和程序运行情况，动态地将 goroutine 分配到少量的系统线程上运行，这些系统线程由 Go 运行时自动管理</li>
<li><strong>执行模型</strong> ：当一个 goroutine 被启动后，它并不是立即执行，而是进入一个就绪队列，等待调度器分配给它运行的机会。调度器会根据一定的策略，如时间片轮转等，从就绪队列中选择 goroutine 进行执行</li>
</ul>
</li>
</ul>
<h3 id="1-基本调用"><a href="#1-基本调用" class="headerlink" title="1.基本调用"></a>1.基本调用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Println(<span class="string">&quot;new Goroutine: i =&quot;</span>,i,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个go进程去执行NewTask()</span></span><br><span class="line">    <span class="keyword">go</span> NewTask()</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Println(<span class="string">&quot;main Goroutine: i =&quot;</span>,i,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">main Goroutine: i = 1 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">new Goroutine: i = 1 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">new Goroutine: i = 2 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">main Goroutine: i = 2 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">main Goroutine: i = 3 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">new Goroutine: i = 3 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">new Goroutine: i = 4 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">main Goroutine: i = 4 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>以上可以看出，goroutine和主进程是并发进行的</p>
<h3 id="2-调用匿名函数"><a href="#2-调用匿名函数" class="headerlink" title="2.调用匿名函数"></a>2.调用匿名函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;A.defer&quot;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;B.defer&quot;</span>)</span><br><span class="line">			fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">		&#125;() <span class="comment">// 调用匿名函数需要在最后面加括号</span></span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> *time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">B</span></span><br><span class="line"><span class="comment">B.defer</span></span><br><span class="line"><span class="comment">A</span></span><br><span class="line"><span class="comment">A.defer</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>想要结束一个goroutine可以使用<code>runtime.Goexit()</code>使其在过程中退出，需要包含<code>&quot;runtime&quot;</code>头文件</p>
<h3 id="3-调用有形参函数"><a href="#3-调用有形参函数" class="headerlink" title="3.调用有形参函数"></a>3.调用有形参函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>,b <span class="type">int</span>)</span></span> <span class="type">bool</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;a =&quot;</span>,a,<span class="string">&quot;b =&quot;</span>,b)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;(<span class="number">10</span>,<span class="number">20</span>) <span class="comment">//后面括号跟传值，直接执行</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> *time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是如果你想得到返回值，比如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flag := <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>,b <span class="type">int</span>)</span></span> <span class="type">bool</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a =&quot;</span>,a,<span class="string">&quot;b =&quot;</span>,b)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;(<span class="number">10</span>,<span class="number">20</span>) <span class="comment">//后面括号跟传值，直接执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//会直接报错</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go10.png"></p>
<p>同样的，你换成：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flag := <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>,b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;a =&quot;</span>,a,<span class="string">&quot;b =&quot;</span>,b)</span><br><span class="line">		<span class="keyword">return</span> a*b</span><br><span class="line">&#125;(<span class="number">10</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>也是一样的报错滴</p>
<p>那么怎么样能在goroutine中返回值呢？<code>channel</code> √</p>
<h2 id="18-Channel"><a href="#18-Channel" class="headerlink" title="18. Channel"></a>18. Channel</h2><p>Channel 是 Go 语言中的一个核心概念，用于在不同的 goroutine之间进行通信和数据交换</p>
<h3 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h3><p>使用<code>make</code>函数创建 channel，语法为<code>ch := make(chan Type)</code>，其中<code>Type</code>是 channel 传递的数据类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Type)</span><br><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Typem, bufferSize) </span><br><span class="line"><span class="comment">//bufferSize表示缓冲区最多可以存储的数据元素个数</span></span><br></pre></td></tr></table></figure>

<p>有缓冲 channel 允许在没有接收者的情况下发送一定数量的数据，只要缓冲区未满，发送操作就不会阻塞；同样，当缓冲区中有数据时，接收操作也不会阻塞</p>
<h3 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2.基本使用"></a>2.基本使用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">channel &lt;- value    <span class="comment">//发送value到channel</span></span><br><span class="line">&lt;- channel          <span class="comment">//接受并丢掉（因为没有变量接受）</span></span><br><span class="line">x := &lt;- channel     <span class="comment">//从channel中获取数据，并赋值给x</span></span><br><span class="line">x, ok := &lt;- channel <span class="comment">//同上，并检查通道是否为空或者是否关闭</span></span><br></pre></td></tr></table></figure>

<p>看个实例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;ending...&quot;</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;starting...&quot;</span>)</span><br><span class="line"></span><br><span class="line">		c &lt;- <span class="number">555</span></span><br><span class="line">	&#125;()</span><br><span class="line">		</span><br><span class="line">	num := &lt;- c</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;num =&quot;</span>,num)</span><br><span class="line">	fmt.Println(<span class="string">&quot;END&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">starting...</span></span><br><span class="line"><span class="comment">ending...</span></span><br><span class="line"><span class="comment">num = 555</span></span><br><span class="line"><span class="comment">END</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="3-有缓冲和无缓冲问题"><a href="#3-有缓冲和无缓冲问题" class="headerlink" title="3.有缓冲和无缓冲问题"></a>3.有缓冲和无缓冲问题</h3><p><strong>无缓冲：</strong>如上面那个实例，如果执行到<code>num := &lt;- c</code>这一步时但此时 <code>c &lt;- 555</code>还未发生（就是比主程序慢了一点），就会发生阻塞，使num赋值的那一步等待c的赋值和传入</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go11.png"></p>
<p><strong>实例：</strong>(此时循环超出给定容量)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len =&quot;</span>,<span class="built_in">len</span>(c),<span class="string">&quot;cap =&quot;</span>,<span class="built_in">cap</span>(c))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;ending...&quot;</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;starting...&quot;</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>;i &lt; <span class="number">6</span>;i++&#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Println(<span class="string">&quot;发送与元素:&quot;</span>,i,<span class="string">&quot;len =&quot;</span>,<span class="built_in">len</span>(c),<span class="string">&quot;cap =&quot;</span>,<span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	</span><br><span class="line">	time.Sleep(<span class="number">2</span> *time.Second)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>;i &lt; <span class="number">6</span>; i++&#123;</span><br><span class="line">		num := &lt;- c</span><br><span class="line">		fmt.Println(<span class="string">&quot;num = &quot;</span>,num)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;END&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">len = 0 cap = 3</span></span><br><span class="line"><span class="comment">starting...</span></span><br><span class="line"><span class="comment">发送与元素: 0 len = 1 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 1 len = 2 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 2 len = 3 cap = 3</span></span><br><span class="line"><span class="comment">num =  0</span></span><br><span class="line"><span class="comment">num =  1</span></span><br><span class="line"><span class="comment">num =  2</span></span><br><span class="line"><span class="comment">num =  3</span></span><br><span class="line"><span class="comment">发送与元素: 3 len = 3 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 4 len = 0 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 5 len = 1 cap = 3</span></span><br><span class="line"><span class="comment">ending...</span></span><br><span class="line"><span class="comment">num =  4</span></span><br><span class="line"><span class="comment">num =  5</span></span><br><span class="line"><span class="comment">END</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>此时就发生了阻塞现象</p>
<p><strong>有缓冲：</strong></p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go12.png"></p>
<p><strong>实例：</strong>（将赋值循环限制在规定容量中）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len =&quot;</span>,<span class="built_in">len</span>(c),<span class="string">&quot;cap =&quot;</span>,<span class="built_in">cap</span>(c))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;ending...&quot;</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;starting...&quot;</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>;i &lt; <span class="number">3</span>;i++&#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Println(<span class="string">&quot;发送与元素:&quot;</span>,i,<span class="string">&quot;len =&quot;</span>,<span class="built_in">len</span>(c),<span class="string">&quot;cap =&quot;</span>,<span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	</span><br><span class="line">	time.Sleep(<span class="number">2</span> *time.Second)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>;i &lt; <span class="number">3</span>; i++&#123;</span><br><span class="line">		num := &lt;- c</span><br><span class="line">		fmt.Println(<span class="string">&quot;num = &quot;</span>,num)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;END&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">len = 0 cap = 3</span></span><br><span class="line"><span class="comment">starting...</span></span><br><span class="line"><span class="comment">发送与元素: 0 len = 1 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 1 len = 2 cap = 3</span></span><br><span class="line"><span class="comment">发送与元素: 2 len = 3 cap = 3</span></span><br><span class="line"><span class="comment">ending...</span></span><br><span class="line"><span class="comment">num =  0</span></span><br><span class="line"><span class="comment">num =  1</span></span><br><span class="line"><span class="comment">num =  2</span></span><br><span class="line"><span class="comment">END</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="4-关闭channel"><a href="#4-关闭channel" class="headerlink" title="4.关闭channel"></a>4.关闭channel</h3><p><strong>关闭 channel</strong></p>
<ul>
<li><strong>关闭操作</strong> ：使用<code>close(ch)</code>可以关闭一个 channel，关闭后不能再向该 channel 发送数据，但仍然可以接收数据</li>
<li><strong>接收已关闭 channel 的数据</strong> ：当从一个已关闭的 channel 接收数据时，如果 channel 中还有剩余数据，会继续接收这些数据；当数据接收完毕后，再次接收会立即返回该类型的零值</li>
</ul>
<p><strong>实例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++&#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> data, ok := &lt;-c; ok&#123;</span><br><span class="line">			fmt.Println(data)</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;ENDING&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">4</span></span><br><span class="line"><span class="comment">ENDING</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>这里我们看到关闭了通道后正常输出，如果没关闭呢：</p>
<p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go13.png"></p>
<p>在这里如果没有关闭channel的话，主程序中的for循环的ok一直会返回true，但此时c已经没有数据了,关闭之后，ok判断为false，则结束循环</p>
<p><strong>注意：</strong></p>
<ol>
<li>但确实没有发送任何数据了，或者想显式的结束range循环，再关闭channel</li>
<li>关闭后无法向channel发送任何数据</li>
<li>关闭之后可以继续从channel中接收数据</li>
<li>对于nil channel，无论收发都会被阻塞</li>
</ol>
<p>对应注意2，如果：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++&#123;</span><br><span class="line">		c &lt;- i</span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">panic: send on closed channel</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">goroutine 19 [running]:</span></span><br><span class="line"><span class="comment">main.main.func1()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<p>对应注意4：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ch <span class="keyword">chan</span> <span class="type">int</span> <span class="comment">//这就是个nil channel，未被初始化</span></span><br><span class="line"></span><br><span class="line">ch &lt;- <span class="number">1</span> <span class="comment">// 阻塞，直到 channel 被初始化</span></span><br><span class="line"></span><br><span class="line">&lt;- ch <span class="comment">// 阻塞，直到 channel 被初始化</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">close</span>(ch) <span class="comment">// 运行时错误：panic: close of nil channel</span></span><br></pre></td></tr></table></figure>



<h3 id="5-channel-range"><a href="#5-channel-range" class="headerlink" title="5.channel &amp; range"></a>5.channel &amp; range</h3><p><strong>实例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> data := <span class="keyword">range</span> c&#123;</span><br><span class="line">	fmt.Println(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>range的作用是如果c中一旦有数据就传给data,没有的话就阻塞</p>
<p>可以使用range来迭代不断操作channel</p>
<h3 id="6-channel-select"><a href="#6-channel-select" class="headerlink" title="6.channel &amp; select"></a>6.channel &amp; select</h3><ul>
<li><strong>多路复用</strong> ：<code>select</code> 可以同时监听多个 channel 上的事件，当任何一个 channel 上的事件发生时，执行相应的代码块。这使得一个 goroutine 可以同时处理多个 channel 上的通信</li>
<li><strong>阻塞和非阻塞</strong> ：如果没有 <code>default</code> 分支，<code>select</code> 会阻塞，直到其中一个 channel 操作可以执行。如果有 <code>default</code> 分支，<code>select</code> 不会阻塞，而是立即执行 <code>default</code> 分支</li>
<li><strong>随机选择</strong> ：如果有多个 channel 操作同时可以执行，<code>select</code> 会随机选择其中一个执行，其他操作会被忽略。这种随机性可以用于实现公平性或避免死锁</li>
</ul>
<p>select可以完成监控多个channel的状态：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line">    <span class="keyword">case</span> &lt;- chan1:</span><br><span class="line">    	<span class="comment">//如果chan1读到数据就执行这句话</span></span><br><span class="line">    <span class="keyword">case</span> &lt;- chan2:</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">//如果上面都没有成功，则执行default语句</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-实例：-超时处理"><a href="#1-实例：-超时处理" class="headerlink" title="**1.实例： **(超时处理)"></a>**1.实例： **(<strong>超时处理</strong>)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">timeout := time.After(<span class="number">2</span> * time.Second)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> &lt;-ch:</span><br><span class="line">    fmt.Println(<span class="string">&quot;Received data from channel&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> &lt;-timeout:</span><br><span class="line">    fmt.Println(<span class="string">&quot;Timeout occurred&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果在指定时间内没有收到数据，执行超时处理逻辑</span></span><br></pre></td></tr></table></figure>

<h4 id="2-实例：-监听多个"><a href="#2-实例：-监听多个" class="headerlink" title="2.实例：(监听多个)"></a><strong>2.实例：</strong>(监听多个)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原视频的斐波那契数列算法错了，以下应该是求二倍</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Calculate</span><span class="params">(c, quit <span class="keyword">chan</span> <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	x, y := <span class="number">1</span> , <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		<span class="keyword">select</span>&#123;</span><br><span class="line">			<span class="keyword">case</span> c&lt;-x:  </span><br><span class="line">				x = y</span><br><span class="line">				y += x</span><br><span class="line">		</span><br><span class="line">			<span class="keyword">case</span> &lt;- quit:</span><br><span class="line">				fmt.Println(<span class="string">&quot;quit...&quot;</span>)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	quit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="number">6</span>; i++&#123;</span><br><span class="line">			fmt.Println(&lt;-c)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		quit &lt;- <span class="number">0</span>  <span class="comment">//执行完程序就就赋值quit,触发第二个case</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	Calculate(c,quit)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-实例：-关闭channel"><a href="#3-实例：-关闭channel" class="headerlink" title="3.实例：(关闭channel)"></a>3.实例：(关闭channel)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"><span class="built_in">close</span>(ch)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> v, ok := &lt;-ch:</span><br><span class="line">    	fmt.Println(<span class="string">&quot;Received from closed channel:&quot;</span>, v, <span class="string">&quot;OK:&quot;</span>, ok)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当一个 channel 被关闭后，<code>select</code> 仍然可以选择该 channel 的接收操作，但会立即返回该类型的零值</p>
<h2 id="19-GoModuels"><a href="#19-GoModuels" class="headerlink" title="19. GoModuels"></a>19. GoModuels</h2><p>Go Modules 是 Go 语言官方推出的一种包管理机制，旨在解决 Go 语言项目中的依赖版本管理问题。自 Go 1.11 版本开始引入，Go 1.13 版本成为默认的依赖管理方式，并逐渐取代早期的 <code>GOPATH</code> 模式。</p>
<h4 id="1-为什么使用-Go-Modules"><a href="#1-为什么使用-Go-Modules" class="headerlink" title="1.为什么使用 Go Modules"></a>1.为什么使用 Go Modules</h4><ul>
<li><strong>版本控制</strong>：可以为依赖库指定特定的版本，避免库的版本更新导致项目不可用。</li>
<li><strong>离线工作</strong>：Go Modules 在本地缓存依赖项，允许在没有网络连接时继续开发。</li>
<li><strong>模块隔离</strong>：每个项目都可以独立管理其依赖项，不再依赖全局的 <code>GOPATH</code>。</li>
<li><strong>可重现构建</strong>：每次构建都可以使用相同的依赖版本，保证项目的一致性。</li>
</ul>
<h3 id="2-go-mod-命令"><a href="#2-go-mod-命令" class="headerlink" title="2.go mod 命令"></a>2.go mod 命令</h3><h4 id="1-初始化模块"><a href="#1-初始化模块" class="headerlink" title="1.初始化模块"></a>1.<strong>初始化模块</strong></h4><p>终端使用 <code>go mod init</code> 命令初始化 Go Modules 文件（<code>go.mod</code>），它会在项目根目录生成一个 <code>go.mod</code> 文件，记录模块名和 Go 版本等信息</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init 你的文件名</span><br></pre></td></tr></table></figure>

<h4 id="2-添加依赖"><a href="#2-添加依赖" class="headerlink" title="2.添加依赖"></a>2.添加依赖</h4><p><img src="/img/lazy.gif" data-original="/2025/04/19/MyGo-1/Go14.png"></p>
<p>在终端使用（下面同理） <code>go get</code> 命令下载并安装依赖包，它会自动将依赖项的版本记录到 <code>go.mod</code> 中</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure>

<p>如果需要安装特定版本的依赖包，可以在包名后面加上 <code>@&lt;version&gt;</code>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/gin-gonic/gin@v1.7.2</span><br></pre></td></tr></table></figure>

<h4 id="3-更新依赖"><a href="#3-更新依赖" class="headerlink" title="3.更新依赖"></a>3.更新依赖</h4><p>使用 <code>go get -u</code> 命令更新依赖项到最新的次版本或修订版本</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure>

<h4 id="4-清理依赖"><a href="#4-清理依赖" class="headerlink" title="4.清理依赖"></a>4.清理依赖</h4><p>使用 <code>go mod tidy</code> 命令清理不再使用的依赖项，并确保 <code>go.mod</code> 和 <code>go.sum</code> 文件是最新的。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod tidy</span><br></pre></td></tr></table></figure>

<h4 id="5-列出依赖项"><a href="#5-列出依赖项" class="headerlink" title="5.列出依赖项"></a>5.列出依赖项</h4><p>使用 <code>go list -m all</code> 命令可以列出所有依赖项的模块及其版本。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go list -m all</span><br></pre></td></tr></table></figure>

<h4 id="6-部分命令"><a href="#6-部分命令" class="headerlink" title="6.部分命令"></a>6.部分命令</h4><table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">介绍</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>go mod init</code></td>
<td align="left">初始化项目依赖，生成 <code>go.mod</code> 文件</td>
</tr>
<tr>
<td align="left"><code>go mod download</code></td>
<td align="left">根据 <code>go.mod</code> 文件下载依赖</td>
</tr>
<tr>
<td align="left"><code>go mod tidy</code></td>
<td align="left">比对项目文件中引入的依赖与 <code>go.mod</code> 进行比对</td>
</tr>
<tr>
<td align="left"><code>go mod graph</code></td>
<td align="left">输出依赖关系图</td>
</tr>
<tr>
<td align="left"><code>go mod edit</code></td>
<td align="left">编辑 <code>go.mod</code> 文件</td>
</tr>
<tr>
<td align="left"><code>go mod vendor</code></td>
<td align="left">将项目的所有依赖导出至 <code>vendor</code> 目录（可用于无网络条件）</td>
</tr>
<tr>
<td align="left"><code>go mod verify</code></td>
<td align="left">检验一个依赖包是否被篡改过</td>
</tr>
<tr>
<td align="left"><code>go mod why</code></td>
<td align="left">解释为什么需要某个依赖</td>
</tr>
</tbody></table>
<h3 id="3-go-mod环境变量"><a href="#3-go-mod环境变量" class="headerlink" title="3.go mod环境变量"></a>3.go mod环境变量</h3><h4 id="1-常见的-Go-Modules-环境变量"><a href="#1-常见的-Go-Modules-环境变量" class="headerlink" title="1.常见的 Go Modules 环境变量"></a>1.常见的 Go Modules 环境变量</h4><table>
<thead>
<tr>
<th align="left">环境变量</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>GO111MODULE</code></td>
<td align="left">是否开启Go Modules模式</td>
</tr>
<tr>
<td align="left"><code>GOPROXY</code></td>
<td align="left">项目第三方依赖库的下载地址（建议设置国内的地址）</td>
</tr>
<tr>
<td align="left"><code>GOSUMDB</code></td>
<td align="left">用来检验拉取的第三方库是否完整</td>
</tr>
<tr>
<td align="left"><code>GOMODCACHE</code></td>
<td align="left">设置 Go 模块缓存目录的路径</td>
</tr>
</tbody></table>
<h4 id="2-介绍"><a href="#2-介绍" class="headerlink" title="2.介绍"></a>2.介绍</h4><h5 id="1-GO111MODULE"><a href="#1-GO111MODULE" class="headerlink" title="1. GO111MODULE"></a>1. <code>GO111MODULE</code></h5><ul>
<li><p><strong>作用</strong>：控制 Go Modules 的启用状态</p>
</li>
<li><p><strong>取值</strong>：</p>
<ul>
<li><code>on</code>：启用 Go Modules，即使在 <code>GOPATH</code> 模式下也会使用 Go Modules</li>
<li><code>off</code>：禁用 Go Modules，使用 <code>GOPATH</code> 模式</li>
<li><code>auto</code>（默认值）：在项目根目录有 <code>go.mod</code> 文件时启用 Go Modules，否则使用 <code>GOPATH</code> 模式</li>
</ul>
</li>
<li><p><strong>示例：</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用 Go Modules</span></span><br><span class="line"><span class="built_in">export</span> GO111MODULE=on</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用 Go Modules</span></span><br><span class="line"><span class="built_in">export</span> GO111MODULE=off</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用默认值</span></span><br><span class="line"><span class="built_in">export</span> GO111MODULE=auto</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2-GOPROXY"><a href="#2-GOPROXY" class="headerlink" title="2. GOPROXY"></a>2. <code>GOPROXY</code></h5><ul>
<li><p><strong>作用</strong>：设置 Go 模块代理的地址</p>
</li>
<li><p><strong>取值</strong>：一个或多个以逗号分隔的代理地址。支持的协议包括 <code>https</code>、<code>http</code> 和 <code>file</code></p>
</li>
<li><p><strong>示例</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOPROXY=https://mirrors.aliyun.com/goproxy/  <span class="comment">#阿里云</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn,direct <span class="comment">#七牛云</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#direct用于指示GO回源到模块版本的源地址去抓取（GitHub....）</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3-GOSUMDB"><a href="#3-GOSUMDB" class="headerlink" title="3. GOSUMDB"></a>3. <code>GOSUMDB</code></h5><ul>
<li><p><strong>作用</strong>：设置校验和数据库的地址</p>
</li>
<li><p><strong>取值</strong>：一个或多个以逗号分隔的校验和数据库地址。支持的协议包括 <code>https</code>、<code>http</code> 和 <code>file</code></p>
</li>
<li><p><strong>示例</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOSUMDB=sum.golang.org</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="4-GOMODCACHE"><a href="#4-GOMODCACHE" class="headerlink" title="4. GOMODCACHE"></a>4. <code>GOMODCACHE</code></h5><ul>
<li><p><strong>作用</strong>：设置 Go 模块缓存目录的路径</p>
</li>
<li><p><strong>取值</strong>：一个有效的文件系统路径</p>
</li>
<li><p><strong>示例</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOMODCACHE=/path/to/cache</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-常用命令总结"><a href="#3-常用命令总结" class="headerlink" title="3.常用命令总结"></a>3.常用命令总结</h4><table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">介绍</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>go env</code></td>
<td align="left">显示当前 Go 环境变量的值</td>
</tr>
<tr>
<td align="left"><code>go env -w</code></td>
<td align="left">设置环境变量的值</td>
</tr>
<tr>
<td align="left"><code>go env -u</code></td>
<td align="left">删除环境变量的值</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://PureStream108.github.io/project">Pure Stream</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://purestream108.github.io/project/2025/04/19/MyGo-1/">https://purestream108.github.io/project/2025/04/19/MyGo-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://PureStream108.github.io/project" target="_blank">PureStream & Marblue</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang/">Golang</a></div><div class="post-share"><div class="social-share" data-image="/img/purestream.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav id="pagination"><div class="pagination"></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/lazy.gif" data-original="/img/purestream.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Pure Stream</div><div class="author-info-description">Web保底人 & X1cT34m</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://www.cnblogs.com/LAMENTXU"><i class="fab fa-github"></i><span>LamentXU头号粉丝</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/PureStream108" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.mihoyo.com/" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">个人说明(推)：知更鸟，芙宁娜，夏洛蒂，春日野穹，星（崩铁），希儿（崩铁），三无Marblue，狂热蓝调德尔塔，朔夜观星，遐蝶，浮波柚叶</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/25/0xGame2025-Official-Web/" title="0xGame2025 Official Web">0xGame2025 Official Web</a><time datetime="2025-08-25T12:52:51.000Z" title="发表于 2025-08-25 20:52:51">2025-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/18/MoeCTF2025-Web/" title="MoeCTF2025 Web">MoeCTF2025 Web</a><time datetime="2025-08-18T12:46:34.000Z" title="发表于 2025-08-18 20:46:34">2025-08-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/17/LilCTF2025-Web-Wp-%E5%A4%8D%E7%8E%B0/" title="LilCTF2025 Web Wp&amp;复现">LilCTF2025 Web Wp&amp;复现</a><time datetime="2025-08-17T10:43:11.000Z" title="发表于 2025-08-17 18:43:11">2025-08-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/Electron%E6%A1%86%E6%9E%B6-%E8%85%BE%E8%AE%AF%E4%BA%91COS/" title="Electron框架&amp;腾讯云COS">Electron框架&amp;腾讯云COS</a><time datetime="2025-07-29T15:26:20.000Z" title="发表于 2025-07-29 23:26:20">2025-07-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/27/NepCTF2025-Web-Wp-%E5%A4%8D%E7%8E%B0/" title="NepCTF2025_Web_Wp&amp;复现">NepCTF2025_Web_Wp&amp;复现</a><time datetime="2025-07-27T07:00:18.000Z" title="发表于 2025-07-27 15:00:18">2025-07-27</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
      <i class="fas fa-angle-right"></i></a>
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CTFWeb%E5%A4%8D%E7%8E%B0-Wp/"><span class="card-category-list-name">CTFWeb复现&Wp</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CTFWeb%E5%A4%8D%E7%8E%B0-WP/"><span class="card-category-list-name">CTFWeb复现/WP</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JNDI%E6%B3%A8%E5%85%A5/"><span class="card-category-list-name">JNDI注入</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LANGUAGE/"><span class="card-category-list-name">LANGUAGE</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LANGUAGE/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PHP/"><span class="card-category-list-name">PHP</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PHP/PHP%E5%87%BD%E6%95%B0/"><span class="card-category-list-name">PHP函数</span><span class="card-category-list-count">1</span></a></li></ul></li>
          </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/WP/" style="font-size: 1.1em; color: #999">WP</a> <a href="/tags/%E5%90%88%E9%9B%86/" style="font-size: 1.1em; color: #999">合集</a> <a href="/tags/0xGame/" style="font-size: 1.1em; color: #999">0xGame</a> <a href="/tags/Web/" style="font-size: 1.42em; color: #99a6b7">Web</a> <a href="/tags/Golang/" style="font-size: 1.1em; color: #999">Golang</a> <a href="/tags/D-3CTF/" style="font-size: 1.1em; color: #999">D^3CTF</a> <a href="/tags/php/" style="font-size: 1.1em; color: #999">php</a> <a href="/tags/NepCTF/" style="font-size: 1.1em; color: #999">NepCTF</a> <a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.26em; color: #999fa8">反序列化</a> <a href="/tags/Php/" style="font-size: 1.1em; color: #999">Php</a> <a href="/tags/Python/" style="font-size: 1.18em; color: #999ca1">Python</a> <a href="/tags/MoeCTF/" style="font-size: 1.1em; color: #999">MoeCTF</a> <a href="/tags/Pickle/" style="font-size: 1.1em; color: #999">Pickle</a> <a href="/tags/CTF/" style="font-size: 1.5em; color: #99a9bf">CTF</a> <a href="/tags/%E5%A4%8D%E7%8E%B0/" style="font-size: 1.34em; color: #99a3b0">复现</a> <a href="/tags/Study/" style="font-size: 1.1em; color: #999">Study</a> <a href="/tags/LilCTF/" style="font-size: 1.1em; color: #999">LilCTF</a> <a href="/tags/%E6%A0%88/" style="font-size: 1.1em; color: #999">栈</a> <a href="/tags/LitCTF/" style="font-size: 1.1em; color: #999">LitCTF</a> <a href="/tags/JNDI%E6%B3%A8%E5%85%A5/" style="font-size: 1.1em; color: #999">JNDI注入</a> <a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 1.1em; color: #999">开发</a> <a href="/tags/Parloo%E6%9D%AF/" style="font-size: 1.1em; color: #999">Parloo杯</a> <a href="/tags/Mini-L-CTF/" style="font-size: 1.1em; color: #999">Mini L-CTF</a> <a href="/tags/PHP/" style="font-size: 1.1em; color: #999">PHP</a> <a href="/tags/Java/" style="font-size: 1.1em; color: #999">Java</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              八月 2025
            </span>
            <span class="card-archive-list-count">3</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/07/">
            <span class="card-archive-list-date">
              七月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/06/">
            <span class="card-archive-list-date">
              六月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/05/">
            <span class="card-archive-list-date">
              五月 2025
            </span>
            <span class="card-archive-list-count">9</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              四月 2025
            </span>
            <span class="card-archive-list-count">3</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2024/12/">
            <span class="card-archive-list-date">
              十二月 2024
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">19</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-08-25T15:02:46.002Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Pure Stream</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.3.0-b3"></script><script src="/js/main.js?v=5.3.0-b3"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/click-show-text.min.js" data-mobile="true" data-text="CTF,Web,miHoYo,PureStream,Marblue" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>